// Generated by dts-bundle v0.7.3
// Dependencies for this module:
//   ../cc

declare module 'drongo-cc' {
    export { Injector } from "drongo-cc/utils/Injector";
    export { Debuger } from "drongo-cc/utils/Debuger";
    export { Pool } from "drongo-cc/utils/Pool";
    export { BitFlag } from "drongo-cc/utils/BitFlag";
    export { LocalStorage } from "drongo-cc/utils/LocalStorage";
    export { StringUtils } from "drongo-cc/utils/StringUtils";
    export { MaxRectBinPack, FindPosition, Rect } from "drongo-cc/utils/MaxRectsBinPack";
    export { RGBA8888Texture } from "drongo-cc/utils/RGBA8888Texture";
    export { IEventDispatcher } from "drongo-cc/events/IEventDispatcher";
    export { Event } from "drongo-cc/events/Event";
    export { EventDispatcher } from "drongo-cc/events/EventDispatcher";
    export { List } from "drongo-cc/containers/List";
    export { Dictionary } from "drongo-cc/containers/Dictionary";
    export { ITicker } from "drongo-cc/ticker/ITicker";
    export { ITickerManager } from "drongo-cc/ticker/ITickerManager";
    export { TickerManager } from "drongo-cc/ticker/TickerManager";
    export { ITimer } from "drongo-cc/timer/ITimer";
    export { Timer } from "drongo-cc/timer/Timer";
    export { IAudioChannel } from "drongo-cc/audios/IAudioChannel";
    export { IAudioGroup } from "drongo-cc/audios/IAudioGroup";
    export { IAudioManager } from "drongo-cc/audios/IAudioManager";
    export { AudioChannel } from "drongo-cc/audios/AudioChannel";
    export { AudioManager } from "drongo-cc/audios/AudioManager";
    export { IResource } from "drongo-cc/res/IResource";
    export { IResManager } from "drongo-cc/res/IResManager";
    export { ResManager } from "drongo-cc/res/ResManager";
    export { Resource } from "drongo-cc/res/Resource";
    export { Res } from "drongo-cc/res/Res";
    export { ResRef } from "drongo-cc/res/ResRef";
    export { ResURL, url2Key, key2URL, fullURL } from "drongo-cc/res/ResURL";
    export { ITask } from "drongo-cc/task/ITask";
    export { TaskQueue } from "drongo-cc/task/TaskQueue";
    export { TaskSequence } from "drongo-cc/task/TaskSequence";
    export { IMatcher } from "drongo-cc/entitys/matchers/IMatcher";
    export { Matcher } from "drongo-cc/entitys/matchers/Matcher";
    export { MatcherAllOf } from "drongo-cc/entitys/matchers/MatcherAllOf";
    export { MatcherAnyOf } from "drongo-cc/entitys/matchers/MatcherAnyOf";
    export { MatcherNoneOf } from "drongo-cc/entitys/matchers/MatcherNoneOf";
    export { Component } from "drongo-cc/entitys/Component";
    export { Entity } from "drongo-cc/entitys/Entity";
    export { Group } from "drongo-cc/entitys/Group";
    export { System } from "drongo-cc/entitys/System";
    export { World } from "drongo-cc/entitys/World";
    export { IState } from "drongo-cc/fsm/IState";
    export { FSM } from "drongo-cc/fsm/FSM";
}

declare module 'drongo-cc/utils/Injector' {
    /**
        * 注入器
        */
    export class Injector {
            /**
                * 注入
                * @param key
                * @param clazz   类型或实例
                */
            static inject(customKey: string, clazz: any): void;
            /**
                * 获取已注入的类型实例
                */
            static getInject(customKey: string): any | null;
    }
}

declare module 'drongo-cc/utils/Debuger' {
    export class Debuger {
            /**
                * 最大保存条数
                */
            static MaxCount: number;
            /**
                * 设置过滤
                * @param key
                * @param isOpen
                */
            static debug(key: string, isOpen: boolean): void;
            /**
                * 获取已保存的日志
                * @param type
                * @returns
                */
            static getLogs(type?: string): Array<string>;
            static log(type: string, msg: any): void;
            static err(type: string, msg: any): void;
            static warn(type: string, msg: any): void;
            static info(type: string, msg: any): void;
    }
}

declare module 'drongo-cc/utils/Pool' {
    /**
        * 可重复利用对象接口
        */
    export interface IRecyclable {
            /**
                * 重置到可复用状态
                */
            reset(): void;
            /**
                * 销毁
                */
            destroy(): void;
    }
    /**
        * 对象池
        */
    export class Pool<T extends IRecyclable> {
            constructor(clazz: {
                    new (): T;
            }, maxCount?: number);
            /**
             * 在池中的对象
             */
            get count(): number;
            /**
                * 使用中的数量
                */
            get usingCount(): number;
            /**
                * 分配
                * @returns
                */
            allocate(): T;
            /**
                * 回收到池中
                * @param value
                * @returns
                */
            recycle(value: T): void;
            /**
                * 批量回收
                * @param list
                */
            recycleList(list: Array<T>): void;
            /**
                * 将所有使用中的对象都回收到池中
                */
            recycleAll(): void;
            destroy(): void;
    }
}

declare module 'drongo-cc/utils/BitFlag' {
    /**
        * bit位操作
        */
    export class BitFlag {
            constructor();
            add(flag: number): void;
            remove(flag: number): void;
            /**
                * 是否包含
                * @param flag
                * @returns
                */
            has(flag: number): boolean;
            /**
                * 位码
                */
            get flags(): number;
            get elements(): Array<number>;
            destroy(): void;
    }
}

declare module 'drongo-cc/utils/LocalStorage' {
    /**
        * 本地数据缓存
        */
    export class LocalStorage {
            /**
                * 初始化
                * @param gameName
                */
            static init(gameName: string): void;
            /**
                * 获取指定数据
                * @param key
                * @returns
                */
            static getItem(key: string): any;
            /**
                * 设置指定数据
                * @param key
                * @param value
                */
            static setItem(key: string, value: any): void;
            /**
                * 清理
                * @param key
                */
            static clearItem(key: string): void;
            /**
                * 清理所有
                */
            static clearAll(): void;
            /**
                * 保存
                */
            static save(): void;
    }
}

declare module 'drongo-cc/utils/StringUtils' {
    export class StringUtils {
            /**
                * 是否为空
                * @param str
                */
            static isEmpty(str: string): boolean;
            /**
                * 参数替换
                *  @param  str
                *  @param  rest
                *
                *  @example
                *
                *  var str:string = "here is some info '{0}' and {1}";
                *  trace(StringUtil.substitute(str, 15.4, true));
                *
                *  // this will output the following string:
                *  // "here is some info '15.4' and true"
                */
            static substitute(str: string, ...rest: any[]): string;
            /**
             * 替换全部字符串
             * @param string src 源串
             * @param string from_ch 被替换的字符
             * @param string to_ch 替换的字符
             *
             * @return string 结果字符串
             */
            static replaceAll(src: string, from_ch: string, to_ch: string): string;
            /**
                * 拆分字符串
                * @param str
                */
            static splitString(str: string, split0: string, split1: string): string[][];
            /**
                * 获取文件后缀名
                * @param url
                */
            static getFileSuffix(url: string): string;
            /**
                * 替换后缀
                * @param url
                * @param suff      后缀
                * @returns
                */
            static replaceSuffix(url: string, suff: string): string;
    }
}

declare module 'drongo-cc/utils/MaxRectsBinPack' {
    export enum FindPosition {
            ShortSideFit = 0,
            BottomLeft = 1,
            ContactPoint = 2,
            LongSideFit = 3,
            AreaFit = 4
    }
    export class MaxRectBinPack {
            /**
                * 构建方程
                * @param width {number} 画板宽度
                * @param height {number} 画板高度
                * @param allowRotate {boolean} 允许旋转
                */
            constructor(width: number, height: number, allowRotate?: boolean);
            /**
                * 在线算法入口 插入矩形方法
                * @param width {number}
                * @param height {number}
                * @param method {FindPosition}
                */
            insert(width: number, height: number, method: FindPosition): Rect;
            /**
                * 占有率
                * @returns
                */
            get occupancy(): number;
            /**
                * 擦除节点
                * @param rect
                */
            eraseNoce(rect: Rect): void;
    }
    export class Rect {
            /**
                * 起点 x 坐标
                */
            x: number;
            /**
                * 起点 y 坐标
                */
            y: number;
            /**
                * 宽度
                */
            width: number;
            /**
                * 高度
                */
            height: number;
            /**
                * 当前是否被旋转了
                */
            isRotated: boolean;
            /**
                * 自定义信息
                */
            info: any;
            /**
                * 克隆
                */
            clone(): Rect;
            /**
                * 矩形是否在另一个矩形内部
                * @param otherRect {Rect}
                */
            isIn(otherRect: Rect): boolean;
            get isEmpty(): boolean;
    }
}

declare module 'drongo-cc/utils/RGBA8888Texture' {
    import { gfx, Texture2D } from "cc";
    /**
        * RGBA8888二进制纹理
        */
    export class RGBA8888Texture extends Texture2D {
            constructor(width: number, height: number);
            /**
                * 填充颜色
                * @param x
                * @param y
                * @param width
                * @param height
                * @param color
                */
            fillRect(x: number, y: number, width: number, height: number, color: number): void;
            /**
                * 通过颜色分量设置
                * @param r
                * @param g
                * @param b
                * @param a
                * @param x
                * @param y
                */
            setPixel(r: number, g: number, b: number, a: number, x: number, y: number): void;
            /**
                * 通过单个颜色值设置
                * @param color
                * @param x
                * @param y
                */
            setPixelColor(color: number, x: number, y: number): void;
            /**
                * 将纹理绘制到纹理
                * @param texture
                * @param sx
                * @param sy
                * @param width
                * @param height
                * @param tx
                * @param ty
                * @param filter
                * @returns
                */
            draw2Texture(texture: Texture2D, sx: number, sy: number, width: number, height: number, tx: number, ty: number, filter?: gfx.Filter): void;
            /**
                * 将二进制数据填充到纹理的指定区域
                * @param buffer
                * @param x
                * @param y
                * @param width
                * @param height
                * @returns
             */
            copyBuffersToTexture(buffer: ArrayBufferView, x: number, y: number, width: number, height: number): void;
    }
}

declare module 'drongo-cc/events/IEventDispatcher' {
    /**
        * 事件分发器
        */
    export interface IEventDispatcher {
            /**
                * 添加事件
                * @param key
                * @param caller
                * @param handler
                * @param priority 优先级 数字越小优先级越高
                */
            on(key: string, handler: (type: string, target?: any, ...arg: any[]) => void, caller: any, priority?: number): void;
            /**
                * 删除事件监听
                * @param key
                * @param caller
                * @param handler
                */
            off(key: string, handler: (type: string, target?: any, ...arg: any[]) => void, caller: any): void;
            /**
                * 删除指定对象所有的事件处理
                * @param caller
                */
            offByCaller(caller: any): void;
            /**
                * 删除所有事件监听
                */
            offAllEvent(): void;
            /**
                * 派发事件
                * @param key
                * @param data
                */
            emit(key: string, data?: any): void;
            /**
                * 是否有事件监听
                * @param key
                */
            hasEvent(key: string): boolean;
            /**
                * 是否包含指定函数事件监听
                * @param key
                * @param caller
                * @param handler
                */
            hasEventHandler(key: string, handler: (type: string, target?: any, ...arg: any[]) => void, caller: any): boolean;
    }
}

declare module 'drongo-cc/events/Event' {
    import { EventDispatcher } from "drongo-cc/events/EventDispatcher";
    export class Event {
            static readonly START: string;
            static readonly PROGRESS: string;
            static readonly COMPLETE: string;
            static readonly ERROR: string;
            static readonly ADD: string;
            static readonly REMOVE: string;
            static readonly UPDATE: string;
            static readonly CLEAR: string;
            static readonly State_Changed: string;
            /**
                * 获取事件通道
                * @param key
                * @returns
                */
            static getChannel(key?: string): EventDispatcher;
            /**
                * 派发事件
                * @param eventType
                * @param data
                * @param channel   通道
                */
            static emit(eventType: string, data?: any, channel?: string): void;
            /**
                * 添加事件监听
                * @param type
                * @param handler
                * @param caller
                * @param priority  优先级
                * @param channel   事件通道
                */
            static on(type: string, handler: (type: string, target?: any, ...arg: any[]) => void, caller: any, priority?: number, channel?: string): void;
            /**
                * 删除事件监听
                * @param type
                * @param handler
                * @param caller
                * @param channel
                * @returns
                */
            static off(type: string, handler: (type: string, target?: any, ...arg: any[]) => void, caller: any, channel?: string): void;
            /**
                * 删除指定对象上的所有事件监听
                * @param caller
                * @param channel
                * @returns
                */
            static offByCaller(caller: any, channel?: string): void;
            /**
                * 删除指定通道上的所有事件监听
                * @param channel
                * @returns
                */
            static offAll(channel?: string): void;
    }
}

declare module 'drongo-cc/events/EventDispatcher' {
    import { IEventDispatcher } from "drongo-cc/events/IEventDispatcher";
    /**
        * 事件分发器(只有一对多的情况下去使用)
        */
    export class EventDispatcher implements IEventDispatcher {
            constructor();
            /**
                * 添加事件
                * @param key
                * @param caller
                * @param func
                * @param priority 优先级（数字越小优先级越高）
                */
            on(key: string, handler: (type: string, target?: any, ...arg: any[]) => void, caller: any, priority?: number): void;
            /**
                * 删除事件监听
                * @param key
                * @param caller
                * @param handler
                */
            off(key: string, handler: (type: string, target?: any, ...arg: any[]) => void, caller: any): void;
            /**
                * 删除指定对象所有的事件处理
                * @param caller
                */
            offByCaller(caller: any): void;
            /**
                * 删除所有事件监听
                */
            offAllEvent(): void;
            /**
                * 派发事件
                * @param key
                * @param data
                */
            emit(key: string, data?: any): void;
            /**
                * 是否有事件监听
                * @param key
                */
            hasEvent(key: string): boolean;
            /**
                * 是否包含指定函数事件监听
                * @param key
                * @param caller
                * @param func
                */
            hasEventHandler(key: string, handler: (type: string, target?: any, ...arg: any[]) => void, caller: any): boolean;
            destroy(): void;
    }
}

declare module 'drongo-cc/containers/List' {
    import { EventDispatcher } from "drongo-cc/events/EventDispatcher";
    /**
        * 列表
        */
    export class List<T> extends EventDispatcher {
            /**
                * 元素数量(内部再增删时会修改这个参数，外部只做计算和绑定使用，切记不可做赋值操作！)
                */
            count: number;
            constructor(only?: boolean);
            /**
                * 添加到末尾(注意如果保证唯一性，那么重复时就直接返回)
                * @param value
                */
            push(value: T): boolean;
            /**
                * 添加到列表头部(注意如果保证唯一性，那么重复时就直接返回)
                * @param value
                * @returns
                */
            unshift(value: T): boolean;
            /**
                * 获取并删除最后一个元素
                * @returns
                */
            pop(): T;
            /**
                * 获取并删除第一个元素
                * @returns
                */
            shift(): T;
            /**
                * 删除指定索引的元素
                * @param index
                */
            removeAt(index: number): T;
            /**
                * 删除元素
                * @param value
                */
            remove(value: T): void;
            /**
                * 移除所有元素
                */
            clear(): void;
            /**
                * 判断是否包含
                * @param value
                * @returns
                */
            has(value: T): boolean;
            /**
                * 查找元素下标
                * @param value
                * @returns
                */
            find(value: T): number;
            /**
                * 查找元素下标
                * @param predicate
                * @returns
                */
            findIndex(predicate: (value: T, index: number, obj: T[]) => unknown): number;
            /**
                * 获取指定元素
                * @param index
                * @returns
                */
            get(index: number): T;
            /**
                * 源列表数据(注意不要直接进行增删操作，而是通过List.push....等接口进行操作)
                */
            get elements(): Array<T>;
    }
}

declare module 'drongo-cc/containers/Dictionary' {
    import { EventDispatcher } from "drongo-cc/events/EventDispatcher";
    /**
        * 字典
        */
    export class Dictionary<TKey, TValue> extends EventDispatcher {
            constructor();
            set(key: TKey, value: TValue): void;
            /**
                * 是否拥有指定KEY的元素
                * @param key
                * @returns
                */
            has(key: TKey): boolean;
            /**
                * 获取指定元素
                * @param key
                * @returns
                */
            get(key: TKey): TValue | undefined;
            /**
                * 通过索引获取元素
                * @param index
                * @returns
                */
            getValue(index: number): TValue | undefined;
            /**
                * 删除指定元素
                * @param key
                * @returns
                */
            delete(key: TKey): TValue | undefined;
            /**
                * 清除所有元素
                */
            clear(): void;
            /**
             * 元素列表
             */
            get elements(): Array<TValue>;
            get size(): number;
            destroy(): void;
    }
}

declare module 'drongo-cc/ticker/ITicker' {
    /**
        * 心跳器接口
        */
    export interface ITicker {
            /**
                * 心跳
                * @param dt  间隔时间(秒)
                */
            tick(dt: number): void;
    }
}

declare module 'drongo-cc/ticker/ITickerManager' {
    import { ITicker } from "drongo-cc/ticker/ITicker";
    export interface ITickerManager {
            /**
                * 添加心跳
                * @param value
                */
            addTicker(value: ITicker): void;
            /**
                * 删除心跳
                * @param value
                */
            removeTicker(value: ITicker): void;
            /**
                * 下一帧回调
                * @param value
                * @param caller
                */
            callNextFrame(value: Function, caller: any): void;
            /**
                * 清理下一帧回调请求(如果存在的话)
                * @param value
                * @param caller
                */
            clearNextFrame(value: Function, caller: any): void;
    }
}

declare module 'drongo-cc/ticker/TickerManager' {
    import { ITicker } from "drongo-cc/ticker/ITicker";
    import { ITickerManager } from "drongo-cc/ticker/ITickerManager";
    /**
        * 心跳管理器
        */
    export class TickerManager {
            static KEY: string;
            /**
                * 添加
                * @param value
                */
            static addTicker(value: ITicker): void;
            /**
                * 删除
                * @param value
                */
            static removeTicker(value: ITicker): void;
            /**
                * 下一帧回调
                * @param value
                */
            static callNextFrame(value: Function, caller: any): void;
            static clearNextFrame(value: Function, caller: any): void;
            static get impl(): ITickerManager;
    }
}

declare module 'drongo-cc/timer/ITimer' {
    export interface ITimer {
            /**
                * 当前时间(推荐使用)
                */
            readonly currentTime: number;
            /**
                * 绝对时间(注意效率较差，不推荐使用！)
                */
            readonly absTime: number;
            /**
                * 重新校准
                */
            reset(time?: number): void;
    }
}

declare module 'drongo-cc/timer/Timer' {
    /**
        * 时间工具类
        */
    export class Timer {
            static KEY: string;
            /**
                * 当前时间(推荐使用)
                */
            static get currentTime(): number;
            /**
                * 绝对时间(注意效率较差，不推荐使用！)
                */
            static get absTime(): number;
            /**
                * 重新校准
                * @param time  时间起点，如果不设置则获取系统当前时间点
                */
            static reset(time?: number): void;
    }
}

declare module 'drongo-cc/audios/IAudioChannel' {
    import { ResURL } from "drongo-cc/res/ResURL";
    /**
        * 音频通道
        */
    export interface IAudioChannel {
            readonly isPlaying: boolean;
            readonly url: ResURL;
            readonly curVolume: number;
            /**
                * 音量
                */
            volume: number;
            mute: boolean;
            /**
                * 播放
                * @param url
                * @param playedComplete
                * @param volume
                * @param fade
                * @param loop
                * @param speed
                */
            play(url: ResURL, playedComplete: Function, volume: number, fade: {
                    time: number;
                    startVolume: number;
                    complete?: Function;
            }, loop: boolean, speed: number): void;
            /**
                * 停止
                */
            stop(): void;
            /**
                *
                * @param time
                * @param startVolume
                * @param endVolume
                * @param complete
                * @param completeStop  结束后是否停止播放
                */
            fade(time: number, endVolume: number, startVolume?: number, complete?: Function, completeStop?: boolean): void;
            /**
                * 心跳
                * @param dt
                */
            tick(dt: number): void;
            pause(): void;
            resume(): void;
    }
}

declare module 'drongo-cc/audios/IAudioGroup' {
    import { ResURL } from "drongo-cc/res/ResURL";
    import { IAudioChannel } from "drongo-cc/audios/IAudioChannel";
    /**
      * 音频组
      */
    export interface IAudioGroup {
        key: number;
        volume: number;
        calculateVolume(): void;
        mute: boolean;
        calculateMute(): void;
        tick(dt: number): void;
        play(url: ResURL, playedCallBack: Function, volume: number, speed: number, loop: boolean): void;
        getPlayingChannel(url: ResURL): IAudioChannel;
        stopAll(): void;
    }
}

declare module 'drongo-cc/audios/IAudioManager' {
    import { ResURL } from "drongo-cc/res/ResURL";
    import { IAudioChannel } from "drongo-cc/audios/IAudioChannel";
    /**
        * 音频管理器
        */
    export interface IAudioManager {
            /**
                * 总音量
                */
            volume: number;
            /**
                * 音乐音量
                */
            musicVolume: number;
            /**
                * 声音音量
                */
            soundVolume: number;
            mute: boolean;
            muteMusic: boolean;
            muteSound: boolean;
            /**
                * 播放音乐
                * @param value
                */
            playMusic(url: ResURL, volume: number, speed: number, loop: boolean): void;
            /**
                * 停止音乐
                */
            stopMusic(): void;
            /**
                * 暂停
                */
            pauseMusic(): void;
            /**
                * 继续播放
                */
            resumeMusic(): void;
            /**
                * 播放声音
                * @param value
                */
            playSound(url: ResURL, playedCallBack: Function, volume: number, speed: number, loop: boolean): void;
            /**
                * 获取正在播放指定音频的轨道
                * @param url
                */
            getPlaying(url: ResURL): IAudioChannel;
    }
}

declare module 'drongo-cc/audios/AudioChannel' {
    import { AudioSource, Node } from "cc";
    import { ResURL } from "drongo-cc/res/ResURL";
    import { IAudioChannel } from "drongo-cc/audios/IAudioChannel";
    export class AudioChannel implements IAudioChannel {
        volume: number;
        constructor(node: Node, source?: AudioSource);
        get url(): ResURL;
        get mute(): boolean;
        set mute(value: boolean);
        play(url: ResURL, playedComplete: Function, volume: number, fade?: {
            time: number;
            startVolume?: number;
            complete?: Function;
            completeStop?: boolean;
        }, loop?: boolean, speed?: number): void;
        stop(): void;
        get isPlaying(): boolean;
        /**
          *
          * @param time
          * @param endVolume
          * @param startVolume
          * @param complete
          * @param completeStop
          * @returns
          */
        fade(time: number, endVolume: number, startVolume?: number, complete?: Function, completeStop?: boolean): void;
        tick(dt: number): void;
        resume(): void;
        pause(): void;
        get curVolume(): number;
    }
}

declare module 'drongo-cc/audios/AudioManager' {
    import { ResURL } from "drongo-cc/res/ResURL";
    import { IAudioChannel } from "drongo-cc/audios/IAudioChannel";
    /**
        * 音频管理器
        */
    export class AudioManager {
            /**
                * 全局唯一注入KEY
                */
            static KEY: string;
            /**
                * 最大音频轨道数量
                */
            static MAX_SOUND_CHANNEL_COUNT: number;
            /**
                * 总音量
                */
            static get volume(): number;
            static set volume(value: number);
            /**
                * 音乐音量
                */
            static get musicVolume(): number;
            static set musicVolume(value: number);
            /**
                * 声音音量
                */
            static get soundVolume(): number;
            static set soundVolume(value: number);
            /**
                * 静音总开关
                */
            static get mute(): boolean;
            static set mute(value: boolean);
            /**
                * 音乐静音开关
                */
            static get muteMusic(): boolean;
            static set muteMusic(value: boolean);
            /**
                * 声音静音开关
                */
            static get muteSound(): boolean;
            static set muteSound(value: boolean);
            /**
                * 播放音乐
                * @param value
                */
            static playMusic(url: ResURL, volume?: number, speed?: number, loop?: boolean): void;
            /**
                * 停止音乐
                */
            static stopMusic(): void;
            /**
                * 暂停
                */
            static pauseMusic(): void;
            /**
                * 继续播放
                */
            static resumeMusic(): void;
            /**
                * 播放声音
                * @param value
                */
            static playSound(url: ResURL, playedCallBack: Function, volume: number, speed: number, loop: boolean): void;
            /**
                * 获取正在播放指定音频的轨道
                * @param url
                */
            static getPlaying(url: ResURL): IAudioChannel;
    }
}

declare module 'drongo-cc/res/IResource' {
    import { ResRef } from "drongo-cc/res/ResRef";
    /**
        * 资源接口
        */
    export interface IResource {
            /**
                * 资源全局唯一KEY
                */
            key: string;
            /**
                * 最后一次操作的时间点
                */
            lastOpTime: number;
            /**
                * 资源
                */
            content: any;
            /**
                * 资源引用数量
                */
            readonly refCount: number;
            /**
                * 资源引用列表长度
                */
            readonly refLength: number;
            /**
                * 添加一个引用
                * @param refKey
                */
            addRef(refKey?: string): ResRef;
            /**
                * 删除引用
                * @param value
                */
            removeRef(value: ResRef): void;
            /**销毁*/
            destroy(): void;
    }
}

declare module 'drongo-cc/res/IResManager' {
    import { ITicker } from "drongo-cc/ticker/ITicker";
    import { IResource } from "drongo-cc/res/IResource";
    import { ResRef } from "drongo-cc/res/ResRef";
    /**
        * 资源管理器接口
        */
    export interface IResManager extends ITicker {
            /**
                * 添加一个资源
                * @param value
                */
            addRes(value: IResource): void;
            /**
                * 获取资源(内部接口)
                * @param key
                */
            _getRes(key: string): IResource;
            /**
                * 是否包含该资源
                * @param key
                */
            hasRes(key: string): boolean;
            /**
                * 添加并返回一个资源引用
                * @param key
                * @param refKey
                */
            addResRef(key: string, refKey?: string): ResRef;
            /**
                * 删除一个资源引用
                * @param value
                */
            removeResRef(value: ResRef): void;
            /**
                * 资源清理
                */
            gc(ignoreTime?: boolean): void;
            /**
                * 资源列表
                */
            readonly resList: Array<IResource>;
    }
}

declare module 'drongo-cc/res/ResManager' {
    import { IResource } from "drongo-cc/res/IResource";
    import { ResRef } from "drongo-cc/res/ResRef";
    export class ResManager {
            static KEY: string;
            /**
                * 资源保留长时间GC
                */
            static GC_TIME: number;
            /**
                * 自动清理
                */
            static AUTO_GC: boolean;
            /**
                * 添加一个资源
                * @param value
                */
            static addRes(value: IResource): void;
            /**
                * 是否包含该资源
                * @param key
                */
            static hasRes(key: string): boolean;
            /**
                * 获取资源（内部接口）
                * @param key
                * @returns
                */
            static _getRes(key: string): IResource;
            /**
                * 添加并返回一个资源引用
                * @param key
                * @param refKey
                */
            static addResRef(key: string, refKey?: string): ResRef;
            /**
                * 删除一个资源引用
                * @param value
                */
            static removeResRef(value: ResRef): void;
            /**
                * 资源清理
                */
            static gc(ignoreTime?: boolean): void;
            /**
                * 资源列表
                * @returns
                */
            static resList(): Array<IResource>;
    }
}

declare module 'drongo-cc/res/Resource' {
    import { IRecyclable } from "drongo-cc/utils/Pool";
    import { IResource } from "drongo-cc/res/IResource";
    import { ResRef } from "drongo-cc/res/ResRef";
    export class Resource implements IResource, IRecyclable {
            /**
                * 状态 0 正常 1待删除
                */
            state: number;
            key: string;
            lastOpTime: number;
            constructor();
            reset(): void;
            set content(value: any);
            get content(): any;
            addRef(refKey?: string): ResRef;
            removeRef(value: ResRef): void;
            destroy(): void;
            /**
                * 引用数量
                */
            get refCount(): number;
            /**
                * 引用列表长度
                */
            get refLength(): number;
    }
}

declare module 'drongo-cc/res/Res' {
    import { AssetManager } from "cc";
    import { ResRef } from "drongo-cc/res/ResRef";
    import { ResURL } from "drongo-cc/res/ResURL";
    export type ResLoader = (url: ResURL, bundle: AssetManager.Bundle, refKey: string, progress?: (progress: number) => void, cb?: (err: Error, resRef: ResRef) => void) => void;
    export class Res {
            static setResLoader(key: string, loader: ResLoader): void;
            static getResLoader(key: string): ResLoader;
            /**
                * 获取资源引用
                * @param urls
                * @param refKey    谁持有该引用
                * @param progress  进度汇报函数
                * @returns
                */
            static getResRef(urls: ResURL | Array<ResURL>, refKey: string, progress?: (progress: number) => void): Promise<ResRef | Array<ResRef>>;
            /**
                * 默认加载器
                * @param url
                * @param bundle
                * @param progress
                * @param cb
                */
            static defaultAssetLoader(url: ResURL, bundle: AssetManager.Bundle, refKey: string, progress?: (progress: number) => void, cb?: (err?: Error, resRef?: ResRef) => void): void;
    }
}

declare module 'drongo-cc/res/ResRef' {
    export class ResRef {
            /**唯一KEY */
            key: string;
            /**引用KEY */
            refKey: string | undefined;
            /**资源内容 */
            content: any;
            constructor();
            /**释放 */
            dispose(): void;
            get isDispose(): boolean;
            reset(): void;
            /**
                * 彻底销毁(注意内部接口，请勿调用)
                */
            destroy(): void;
    }
}

declare module 'drongo-cc/res/ResURL' {
    import { Asset } from "cc";
    export type ResURL = string | {
            url: string;
            bundle: string;
            type: string | typeof Asset;
    };
    /**
        * 资源地址转唯一KEY
        * @param url
        * @returns
        */
    export function url2Key(url: ResURL): string;
    /**
        * 唯一key转URL
        * @param key
        * @returns
        */
    export function key2URL(key: string): ResURL;
    /**
        * 获取全路径
        * @param url
        * @returns
        */
    export function fullURL(url: ResURL): string;
}

declare module 'drongo-cc/task/ITask' {
    import { IEventDispatcher } from "drongo-cc/events/IEventDispatcher";
    /**
        * 任务接口
        */
    export interface ITask extends IEventDispatcher {
            /**
                * 开始
                * @param data
                */
            start(data?: any): void;
            /**
                * 销毁
                */
            destroy(): void;
    }
}

declare module 'drongo-cc/task/TaskQueue' {
    import { EventDispatcher } from "drongo-cc/events/EventDispatcher";
    import { ITask } from "drongo-cc/task/ITask";
    /**
      * 任务队列
      */
    export class TaskQueue extends EventDispatcher implements ITask {
        constructor();
        addTask(value: ITask): void;
        removeTask(value: ITask): void;
        start(data?: any): void;
        destroy(): void;
    }
}

declare module 'drongo-cc/task/TaskSequence' {
    import { EventDispatcher } from "drongo-cc/events/EventDispatcher";
    import { ITask } from "drongo-cc/task/ITask";
    /**
      * 任务序列（并行）
      */
    export class TaskSequence extends EventDispatcher implements ITask {
        constructor();
        addTask(value: ITask): void;
        removeTask(value: ITask): void;
        start(data?: any): void;
        destroy(): void;
    }
}

declare module 'drongo-cc/entitys/matchers/IMatcher' {
    export interface IMatcher {
        readonly flags: number;
        readonly elements: Array<number>;
    }
}

declare module 'drongo-cc/entitys/matchers/Matcher' {
    import { BitFlag } from "drongo-cc/utils/BitFlag";
    import { IMatcher } from "drongo-cc/entitys/matchers/IMatcher";
    export class Matcher extends BitFlag implements IMatcher {
        constructor(flags: Array<number>);
    }
}

declare module 'drongo-cc/entitys/matchers/MatcherAllOf' {
    import { Matcher } from "drongo-cc/entitys/matchers/Matcher";
    /**
      * 必须所有成立
      */
    export class MatcherAllOf extends Matcher {
    }
}

declare module 'drongo-cc/entitys/matchers/MatcherAnyOf' {
    import { Matcher } from "drongo-cc/entitys/matchers/Matcher";
    /**
      * 任意一个成立
      */
    export class MatcherAnyOf extends Matcher {
    }
}

declare module 'drongo-cc/entitys/matchers/MatcherNoneOf' {
    import { Matcher } from "drongo-cc/entitys/matchers/Matcher";
    /**
      * 不能包含
      */
    export class MatcherNoneOf extends Matcher {
    }
}

declare module 'drongo-cc/entitys/Component' {
    import { Entity } from "drongo-cc/entitys/Entity";
    export class Component {
            /**
                * 所属实体
                */
            entity: Entity;
            /**
                * 类型
                */
            get type(): number;
            dispose(): void;
    }
}

declare module 'drongo-cc/entitys/Entity' {
    import { Component } from "drongo-cc/entitys/Component";
    import { Group } from "drongo-cc/entitys/Group";
    import { World } from "drongo-cc/entitys/World";
    export class Entity {
            constructor(id: string, world: World);
            /**
                * 添加组件
                * @param value
                */
            addComponent(value: Component): Component;
            /**
                * 删除组件
                * @param id
                */
            removeComponent(value: Component): void;
            /**
                * 获取组件
                * @param type
                */
            getComponent(type: number): Component;
            /**
                * 获取组件列表
                * @param type
                * @returns
                */
            getComponents(type: number): Array<Component>;
            /**
                * 唯一ID
                */
            get id(): string;
            /**
                * 销毁
                */
            dispose(): void;
            /**
                * 是否符合匹配规则
                * @param group
                */
            _matcherGroup(group: Group): boolean;
    }
}

declare module 'drongo-cc/entitys/Group' {
    import { Dictionary } from "drongo-cc/containers/Dictionary";
    import { Entity } from "drongo-cc/entitys/Entity";
    import { MatcherAllOf } from "drongo-cc/entitys/matchers/MatcherAllOf";
    import { MatcherAnyOf } from "drongo-cc/entitys/matchers/MatcherAnyOf";
    import { MatcherNoneOf } from "drongo-cc/entitys/matchers/MatcherNoneOf";
    export class Group {
            /**
                * 全部包含或任意包含
                */
            matcher: MatcherAllOf | MatcherAnyOf;
            /**
                * 不能包含的
                */
            matcherNoneOf: MatcherNoneOf;
            /**
                * 编组所匹配的元素(内部接口)
                */
            _entitys: Dictionary<string, Entity>;
            constructor();
            init(allOrAny: MatcherAllOf | MatcherAnyOf, none?: MatcherNoneOf): void;
            get id(): string;
            static create(allOrAny: MatcherAllOf | MatcherAnyOf, none?: MatcherNoneOf): Group;
            static recycle(value: Group): void;
    }
}

declare module 'drongo-cc/entitys/System' {
    import { MatcherAllOf } from "drongo-cc/entitys/matchers/MatcherAllOf";
    import { MatcherAnyOf } from "drongo-cc/entitys/matchers/MatcherAnyOf";
    import { MatcherNoneOf } from "drongo-cc/entitys/matchers/MatcherNoneOf";
    import { Group } from "drongo-cc/entitys/Group";
    export class System {
            /**
                * 内部接口
                */
            _group: Group;
            /**
                * 系统
                * @param allOrAny  所有或任意一个包含
                * @param none      不能包含
                */
            constructor(allOrAny: MatcherAllOf | MatcherAnyOf, none?: MatcherNoneOf);
            tick(time: number): void;
    }
}

declare module 'drongo-cc/entitys/World' {
    import { Component } from "drongo-cc/entitys/Component";
    import { Entity } from "drongo-cc/entitys/Entity";
    import { Group } from "drongo-cc/entitys/Group";
    import { System } from "drongo-cc/entitys/System";
    export class World {
            constructor();
            /**
                * 心跳驱动
                * @param time
                */
            tick(time: number): void;
            /**
                * 创建一个实体
                */
            createEntity(id: string): Entity;
            /**
                * 通过ID获取实体
                * @param id
                */
            getEntity(id: string): Entity;
            /**
                * 添加系统
                */
            addSystem(value: System): void;
            /**
                * 删除系统
                * @param value
                */
            removeSystem(value: System): void;
            /**
                * 根据类型获取组件列表
                * @param type
                */
            getComponent(type: number): Component[];
            _matcherGroup(group: Group): void;
            /**
                * 内部接口，请勿调用
                * @param com
                */
            _addComponent(com: Component): void;
            /**
                * 内部接口，请勿调用
                * @param com
                */
            _removeComponent(com: Component): void;
            /**
                * 内部接口，请勿调用
                * @param value
                */
            _removeEntity(value: Entity): void;
    }
}

declare module 'drongo-cc/fsm/IState' {
    import { FSM } from "drongo-cc/fsm/FSM";
    /**
      * 状态接口
      */
    export interface IState {
        name: string;
        /**初始化 */
        init(content: FSM): void;
        /**进入 */
        enter(data?: any): void;
        /**心跳 */
        tick(dt: number): void;
        /**退出 */
        exit(): void;
        /**销毁 */
        destroy(): void;
    }
}

declare module 'drongo-cc/fsm/FSM' {
    import { EventDispatcher } from "drongo-cc/events/EventDispatcher";
    import { IState } from "drongo-cc/fsm/IState";
    /**
        * 状态机
        */
    export class FSM extends EventDispatcher {
            /**所属*/
            owner: any;
            debug: boolean;
            constructor(owner: any, name: string);
            tick(dt: number): void;
            /**
                * 添加
                * @param key
                * @param v
                */
            addState(key: number, v: IState): void;
            /**
                * 切换状态
                * @param value
                * @param data
                * @returns
                */
            switchState(value: number, data?: any): void;
            get state(): number;
            get current(): IState;
            destroy(): void;
    }
}

